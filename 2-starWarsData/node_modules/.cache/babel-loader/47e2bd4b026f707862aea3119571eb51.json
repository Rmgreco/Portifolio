{"ast":null,"code":"var _jsxFileName = \"/home/usuario/projetos/sd-08-project-starwars-planets-search/src/context/PlanetsProvider.js\";\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport PlanetsContext from './PlanetsContext';\nconst initialColumns = ['rotation_period', 'orbital_period', 'diameter', 'surface_water', 'population'];\nconst filterOptions = {\n  filtrarPorNome: {\n    name: ''\n  },\n  filtrarPorNumero: [{\n    column: '',\n    comparison: '',\n    value: ''\n  }]\n};\n\nfunction PlanetsProvider({\n  children\n}) {\n  const [data, setData] = useState([]);\n  const [planets, setPlanets] = useState([]);\n  const [filters, setFilters] = useState(filterOptions);\n  const [columns, setColumns] = useState(initialColumns);\n  useEffect(() => {\n    fetch('https://swapi-trybe.herokuapp.com/api/planets/').then(response => response.json()).then(result => setData(result.results));\n  }, [data]);\n  useEffect(() => {\n    const {\n      filtrarPorNome: {\n        name\n      },\n      filtrarPorNumero\n    } = filters;\n    filtrarPorNumero.forEach(filterValues => {\n      const {\n        column,\n        comparison,\n        value\n      } = filterValues;\n      const filter = data.filter(planet => {\n        const includesName = planet.name.toLowerCase().includes(name.toLowerCase());\n\n        switch (comparison) {\n          case 'maior que':\n            return parseInt(planet[column], 10) > parseInt(value, 10) && includesName;\n\n          case 'menor que':\n            return parseInt(planet[column], 10) < parseInt(value, 10) && includesName;\n\n          case 'igual a':\n            return parseInt(planet[column], 10) === parseInt(value, 10) && includesName;\n\n          default:\n            return includesName;\n        }\n      });\n      setPlanets(filter);\n    });\n  }, [data, filters]);\n  const contextValues = {\n    planets,\n    setPlanets,\n    filters,\n    setFilters,\n    columns,\n    setColumns\n  };\n  return /*#__PURE__*/React.createElement(PlanetsContext.Provider, {\n    value: contextValues,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, children);\n}\n\nexport default PlanetsProvider;\nPlanetsProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};","map":{"version":3,"sources":["/home/usuario/projetos/sd-08-project-starwars-planets-search/src/context/PlanetsProvider.js"],"names":["React","useEffect","useState","PropTypes","PlanetsContext","initialColumns","filterOptions","filtrarPorNome","name","filtrarPorNumero","column","comparison","value","PlanetsProvider","children","data","setData","planets","setPlanets","filters","setFilters","columns","setColumns","fetch","then","response","json","result","results","forEach","filterValues","filter","planet","includesName","toLowerCase","includes","parseInt","contextValues","propTypes","node","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport PlanetsContext from './PlanetsContext';\n\nconst initialColumns = [\n  'rotation_period',\n  'orbital_period',\n  'diameter',\n  'surface_water',\n  'population',\n];\n\nconst filterOptions = {\n  filtrarPorNome: {\n    name: '',\n  },\n  filtrarPorNumero: [{\n    column: '',\n    comparison: '',\n    value: '',\n  }],\n};\n\nfunction PlanetsProvider({ children }) {\n  const [data, setData] = useState([]);\n  const [planets, setPlanets] = useState([]);\n  const [filters, setFilters] = useState(filterOptions);\n  const [columns, setColumns] = useState(initialColumns);\n\n  useEffect(() => {\n    fetch('https://swapi-trybe.herokuapp.com/api/planets/').then((response) => response.json()).then((result) => setData(result.results));\n  }, [data]);\n\n  useEffect(() => {\n    const { filtrarPorNome: { name }, filtrarPorNumero } = filters;\n    filtrarPorNumero.forEach((filterValues) => {\n      const { column, comparison, value } = filterValues;\n      const filter = data.filter((planet) => {\n        const includesName = planet.name.toLowerCase().includes(name.toLowerCase());\n        switch (comparison) {\n        case ('maior que'):\n          return parseInt(planet[column], 10) > parseInt(value, 10) && includesName;\n        case ('menor que'):\n          return parseInt(planet[column], 10) < parseInt(value, 10) && includesName;\n        case ('igual a'):\n          return parseInt(planet[column], 10) === parseInt(value, 10) && includesName;\n        default:\n          return includesName;\n        }\n      });\n      setPlanets(filter);\n    });\n  }, [data, filters]);\n\n  const contextValues = { planets, setPlanets, filters, setFilters, columns, setColumns };\n\n  return (\n    <PlanetsContext.Provider value={ contextValues }>\n      {children}\n    </PlanetsContext.Provider>\n  );\n}\n\nexport default PlanetsProvider;\n\nPlanetsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}