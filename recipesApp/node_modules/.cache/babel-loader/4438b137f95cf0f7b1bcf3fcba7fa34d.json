{"ast":null,"code":"var _jsxFileName = \"/home/usuario/projetos/sd-08-project-recipes-app/src/components/ItemsDetails.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'clipboard-copy';\nimport blackHeartIcon from \"../images/blackHeartIcon.svg\";\nimport shareIcon from \"../images/shareIcon.svg\";\nimport whiteHeartIcon from \"../images/whiteHeartIcon.svg\";\nimport Recommendation from './Recommendation';\nimport IngredientList from './IngredientList';\nimport RenderButton from './RenderButton';\n\nclass ItemsDetails extends Component {\n  constructor() {\n    super();\n    this.state = {\n      copied: false,\n      favorited: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleProgress = this.handleProgress.bind(this);\n    this.handleFav = this.handleFav.bind(this);\n    this.handleBlackIcon = this.handleBlackIcon.bind(this);\n    this.ingredientesComQuantidades = this.ingredientesComQuantidades.bind(this);\n  }\n\n  componentDidMount() {\n    this.handleBlackIcon();\n  }\n\n  handleClick() {\n    const {\n      pathname\n    } = this.props;\n    const splitPathname = pathname.split('/');\n    const pathUrl = `/${splitPathname[1]}/${splitPathname[2]}`;\n    const TWO_SECOND = 2000;\n    copy(`http://localhost:3000${pathUrl}`);\n    this.setState({\n      copied: true\n    }, () => {\n      setTimeout(() => {\n        this.setState({\n          copied: false\n        });\n      }, TWO_SECOND);\n    });\n  }\n\n  handleProgress(type, id) {\n    const {\n      history\n    } = this.props;\n    if (type === 'Meal') return history.push(`/comidas/${id}/in-progress`);\n    return history.push(`/bebidas/${id}/in-progress`);\n  }\n\n  handleFav(result, type) {\n    const itemId = result[`id${type}`];\n    const favorites = JSON.parse(localStorage.getItem('favoriteRecipes'));\n\n    if (favorites) {\n      const checkFav = favorites.find(favId => favId.id === itemId);\n\n      if (checkFav !== undefined) {\n        const filterFav = favorites.filter(favorite => itemId !== favorite.id);\n        return localStorage.setItem('favoriteRecipes', JSON.stringify(filterFav));\n      }\n\n      const fav = [...favorites, {\n        id: result[`id${type}`],\n        type: type === 'Meal' ? 'comida' : 'bebida',\n        area: result.strArea || '',\n        category: result.strCategory,\n        alcoholicOrNot: result.strAlcoholic || '',\n        name: result[`str${type}`],\n        image: result[`str${type}Thumb`]\n      }];\n      return localStorage.setItem('favoriteRecipes', JSON.stringify(fav));\n    }\n\n    localStorage.setItem('favoriteRecipes', JSON.stringify([{\n      id: result[`id${type}`],\n      type: type === 'Meal' ? 'comida' : 'bebida',\n      area: result.strArea || '',\n      category: result.strCategory,\n      alcoholicOrNot: result.strAlcoholic || '',\n      name: result[`str${type}`],\n      image: result[`str${type}Thumb`]\n    }]));\n  }\n\n  handleBlackIcon() {\n    const {\n      type,\n      result\n    } = this.props;\n    const id = result[`id${type}`];\n    const favorites = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    let checkFav = false;\n    if (favorites) checkFav = favorites.find(favId => favId.id === id);\n    if (!checkFav || checkFav === undefined) return this.setState({\n      favorited: false\n    });\n    return this.setState({\n      favorited: true\n    });\n  }\n\n  juntar(chave, itemValue) {\n    return Object.entries(itemValue).map(nome => {\n      if (nome[0].includes(chave)) return nome[1];\n      return undefined;\n    }).filter(element => element !== undefined);\n  }\n\n  checkRecipeProgress(type, id) {\n    const inLocalStorage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (type === 'Meal' && inLocalStorage && inLocalStorage.meals) {\n      const filterId = Object.keys(inLocalStorage.meals).find(localId => id === localId);\n      if (filterId) return 'Continuar Receita';\n    }\n\n    if (type === 'Drink' && inLocalStorage && inLocalStorage.cocktails) {\n      const filterId = Object.keys(inLocalStorage.cocktails).find(localId => id === localId);\n      if (filterId) return 'Continuar Receita';\n    }\n\n    return 'Iniciar Receita';\n  }\n\n  ingredientesComQuantidades(itemValue) {\n    const {\n      pathname\n    } = this.props;\n    const ingredient = this.juntar('strIngredient', itemValue);\n    const measure = this.juntar('strMeasure', itemValue);\n    const splitUrl = pathname.split('/')[3];\n    return ingredient.map((nome, index) => {\n      if (nome) {\n        return /*#__PURE__*/React.createElement(IngredientList, {\n          splitUrl: splitUrl,\n          key: index,\n          index: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 11\n          }\n        }, `${nome} - ${measure[index]}`);\n      }\n\n      return undefined;\n    });\n  }\n\n  startRecipe(type, id) {\n    const inLocalStorage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (type === 'Meal') {\n      if (inLocalStorage !== null) {\n        const newArray = { ...inLocalStorage,\n          meals: { ...inLocalStorage.meals,\n            [id]: []\n          }\n        };\n        localStorage.setItem('inProgressRecipes', JSON.stringify(newArray));\n        return;\n      }\n\n      const newArray = {\n        meals: {\n          [id]: []\n        }\n      };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(newArray));\n    }\n\n    if (type === 'Drink') {\n      if (inLocalStorage !== null) {\n        const newArray = { ...inLocalStorage,\n          cocktails: { ...inLocalStorage.cocktails,\n            [id]: []\n          }\n        };\n        localStorage.setItem('inProgressRecipes', JSON.stringify(newArray));\n        return;\n      }\n\n      const newArray = {\n        cocktails: {\n          [id]: []\n        }\n      };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(newArray));\n    }\n  }\n\n  render() {\n    const {\n      copied,\n      favorited\n    } = this.state;\n    const {\n      type,\n      result,\n      pathname,\n      history\n    } = this.props;\n    const checkPage = pathname.split('/')[3];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n      \"data-testid\": \"recipe-photo\",\n      src: result[`str${type}Thumb`],\n      alt: \"img\",\n      width: \"70px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }), result.strAlcoholic ? /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"recipe-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }, result.strAlcoholic) : /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"recipe-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, result.strCategory), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.handleClick,\n      \"data-testid\": \"share-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: shareIcon,\n      alt: \"share icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    })), copied && /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 20\n      }\n    }, \"Link copiado!\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        this.handleFav(result, type);\n        this.handleBlackIcon(result[`id${type}`]);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      \"data-testid\": \"favorite-btn\",\n      src: favorited ? blackHeartIcon : whiteHeartIcon,\n      alt: \"favorite\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"h1\", {\n      \"data-testid\": \"recipe-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }\n    }, result[`str${type}`]), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }\n    }, result.strCategory), result.strYoutube && /*#__PURE__*/React.createElement(\"iframe\", {\n      title: \"video\",\n      \"data-testid\": \"video\",\n      src: result.strYoutube.replace('watch?v=', 'embed/'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }, this.ingredientesComQuantidades(result)), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"instructions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }\n    }, \"Instru\\xE7\\xF5es:\", result.strInstructions), /*#__PURE__*/React.createElement(Recommendation, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(RenderButton, {\n      checkPage: checkPage,\n      startRecipe: this.startRecipe,\n      handleProgress: this.handleProgress,\n      type: type,\n      id: result[`id${type}`],\n      history: history,\n      checkRecipeProgress: this.checkRecipeProgress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default ItemsDetails;\nItemsDetails.propTypes = {\n  type: PropTypes.string.isRequired,\n  result: PropTypes.objectOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number])).isRequired,\n  pathname: PropTypes.string.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func\n  })\n};\nItemsDetails.defaultProps = {\n  history: undefined\n};","map":{"version":3,"sources":["/home/usuario/projetos/sd-08-project-recipes-app/src/components/ItemsDetails.js"],"names":["React","Component","PropTypes","copy","Recommendation","IngredientList","RenderButton","ItemsDetails","constructor","state","copied","favorited","handleClick","bind","handleProgress","handleFav","handleBlackIcon","ingredientesComQuantidades","componentDidMount","pathname","props","splitPathname","split","pathUrl","TWO_SECOND","setState","setTimeout","type","id","history","push","result","itemId","favorites","JSON","parse","localStorage","getItem","checkFav","find","favId","undefined","filterFav","filter","favorite","setItem","stringify","fav","area","strArea","category","strCategory","alcoholicOrNot","strAlcoholic","name","image","juntar","chave","itemValue","Object","entries","map","nome","includes","element","checkRecipeProgress","inLocalStorage","meals","filterId","keys","localId","cocktails","ingredient","measure","splitUrl","index","startRecipe","newArray","render","checkPage","shareIcon","blackHeartIcon","whiteHeartIcon","strYoutube","replace","strInstructions","propTypes","string","isRequired","objectOf","oneOfType","number","shape","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport copy from 'clipboard-copy';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\nimport shareIcon from '../images/shareIcon.svg';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport Recommendation from './Recommendation';\nimport IngredientList from './IngredientList';\nimport RenderButton from './RenderButton';\n\nclass ItemsDetails extends Component {\n  constructor() {\n    super();\n    this.state = {\n      copied: false,\n      favorited: false,\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleProgress = this.handleProgress.bind(this);\n    this.handleFav = this.handleFav.bind(this);\n    this.handleBlackIcon = this.handleBlackIcon.bind(this);\n    this.ingredientesComQuantidades = this.ingredientesComQuantidades.bind(this);\n  }\n\n  componentDidMount() {\n    this.handleBlackIcon();\n  }\n\n  handleClick() {\n    const { pathname } = this.props;\n    const splitPathname = pathname.split('/');\n    const pathUrl = `/${splitPathname[1]}/${splitPathname[2]}`;\n    const TWO_SECOND = 2000;\n    copy(`http://localhost:3000${pathUrl}`);\n    this.setState({\n      copied: true,\n    }, () => {\n      setTimeout(() => {\n        this.setState({ copied: false });\n      }, TWO_SECOND);\n    });\n  }\n\n  handleProgress(type, id) {\n    const { history } = this.props;\n    if (type === 'Meal') return history.push(`/comidas/${id}/in-progress`);\n    return history.push(`/bebidas/${id}/in-progress`);\n  }\n\n  handleFav(result, type) {\n    const itemId = result[`id${type}`];\n    const favorites = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    if (favorites) {\n      const checkFav = favorites.find((favId) => favId.id === itemId);\n      if (checkFav !== undefined) {\n        const filterFav = favorites.filter((favorite) => itemId !== favorite.id);\n        return localStorage.setItem('favoriteRecipes', JSON.stringify(filterFav));\n      }\n      const fav = [...favorites,\n        {\n          id: result[`id${type}`],\n          type: (type === 'Meal' ? 'comida' : 'bebida'),\n          area: result.strArea || '',\n          category: result.strCategory,\n          alcoholicOrNot: result.strAlcoholic || '',\n          name: result[`str${type}`],\n          image: result[`str${type}Thumb`],\n        }];\n      return localStorage.setItem('favoriteRecipes', JSON.stringify(fav));\n    }\n    localStorage.setItem('favoriteRecipes', JSON.stringify([{\n      id: result[`id${type}`],\n      type: (type === 'Meal' ? 'comida' : 'bebida'),\n      area: result.strArea || '',\n      category: result.strCategory,\n      alcoholicOrNot: result.strAlcoholic || '',\n      name: result[`str${type}`],\n      image: result[`str${type}Thumb`],\n    }]));\n  }\n\n  handleBlackIcon() {\n    const { type, result } = this.props;\n    const id = result[`id${type}`];\n    const favorites = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    let checkFav = false;\n    if (favorites) checkFav = favorites.find((favId) => favId.id === id);\n    if (!checkFav || checkFav === undefined) return this.setState({ favorited: false });\n    return this.setState({ favorited: true });\n  }\n\n  juntar(chave, itemValue) {\n    return Object.entries(itemValue).map((nome) => {\n      if (nome[0].includes(chave)) return nome[1];\n      return undefined;\n    }).filter((element) => element !== undefined);\n  }\n\n  checkRecipeProgress(type, id) {\n    const inLocalStorage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (type === 'Meal' && inLocalStorage && inLocalStorage.meals) {\n      const filterId = Object.keys(inLocalStorage.meals)\n        .find((localId) => id === localId);\n      if (filterId) return 'Continuar Receita';\n    }\n    if (type === 'Drink' && inLocalStorage && inLocalStorage.cocktails) {\n      const filterId = Object.keys(inLocalStorage.cocktails)\n        .find((localId) => id === localId);\n      if (filterId) return 'Continuar Receita';\n    }\n    return 'Iniciar Receita';\n  }\n\n  ingredientesComQuantidades(itemValue) {\n    const { pathname } = this.props;\n    const ingredient = this.juntar('strIngredient', itemValue);\n    const measure = this.juntar('strMeasure', itemValue);\n    const splitUrl = pathname.split('/')[3];\n    return ingredient.map((nome, index) => {\n      if (nome) {\n        return (\n          <IngredientList\n            splitUrl={ splitUrl }\n            key={ index }\n            index={ index }\n          >\n            {`${nome} - ${measure[index]}`}\n          </IngredientList>\n        );\n      }\n      return undefined;\n    });\n  }\n\n  startRecipe(type, id) {\n    const inLocalStorage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (type === 'Meal') {\n      if (inLocalStorage !== null) {\n        const newArray = { ...inLocalStorage,\n          meals: { ...inLocalStorage.meals, [id]: [] } };\n        localStorage.setItem('inProgressRecipes', JSON.stringify(newArray));\n        return;\n      }\n      const newArray = { meals: { [id]: [] } };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(newArray));\n    }\n    if (type === 'Drink') {\n      if (inLocalStorage !== null) {\n        const newArray = { ...inLocalStorage,\n          cocktails: { ...inLocalStorage.cocktails, [id]: [] } };\n        localStorage.setItem('inProgressRecipes', JSON.stringify(newArray));\n        return;\n      }\n      const newArray = { cocktails: { [id]: [] } };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(newArray));\n    }\n  }\n\n  render() {\n    const { copied, favorited } = this.state;\n    const { type, result, pathname, history } = this.props;\n    const checkPage = pathname.split('/')[3];\n\n    return (\n      <>\n        <img\n          data-testid=\"recipe-photo\"\n          src={ result[`str${type}Thumb`] }\n          alt=\"img\"\n          width=\"70px\"\n        />\n        {result.strAlcoholic ? (\n          <p data-testid=\"recipe-category\">\n            {result.strAlcoholic}\n          </p>\n        ) : (\n          <p data-testid=\"recipe-category\">\n            {result.strCategory}\n          </p>\n        )}\n        <button type=\"button\" onClick={ this.handleClick } data-testid=\"share-btn\">\n          <img src={ shareIcon } alt=\"share icon\" />\n        </button>\n        {copied && <span>Link copiado!</span>}\n        <button\n          type=\"button\"\n          onClick={ () => {\n            this.handleFav(result, type);\n            this.handleBlackIcon(result[`id${type}`]);\n          } }\n        >\n          <img\n            data-testid=\"favorite-btn\"\n            src={ favorited ? blackHeartIcon\n              : whiteHeartIcon }\n            alt=\"favorite\"\n          />\n        </button>\n        <h1 data-testid=\"recipe-title\">{ result[`str${type}`] }</h1>\n        <p>\n          { result.strCategory }\n        </p>\n        {result.strYoutube\n        && <iframe\n          title=\"video\"\n          data-testid=\"video\"\n          src={ result.strYoutube.replace('watch?v=', 'embed/') }\n        />}\n        <div>\n          {this.ingredientesComQuantidades(result)}\n        </div>\n        <p data-testid=\"instructions\">\n          Instruções:\n          {result.strInstructions}\n        </p>\n        <Recommendation />\n        <RenderButton\n          checkPage={ checkPage }\n          startRecipe={ this.startRecipe }\n          handleProgress={ this.handleProgress }\n          type={ type }\n          id={ result[`id${type}`] }\n          history={ history }\n          checkRecipeProgress={ this.checkRecipeProgress }\n        />\n      </>\n    );\n  }\n}\n\nexport default ItemsDetails;\n\nItemsDetails.propTypes = {\n  type: PropTypes.string.isRequired,\n  result: PropTypes.objectOf(PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ])).isRequired,\n  pathname: PropTypes.string.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }),\n};\n\nItemsDetails.defaultProps = {\n  history: undefined,\n};\n"]},"metadata":{},"sourceType":"module"}